(this["webpackJsonpmessenger-clone"]=this["webpackJsonpmessenger-clone"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var s=n(7),c=n.n(s),r=n(16),a=(n(22),n(9)),i=(n(23),n(3));function u(e){var t=e.setScreen;return Object(i.jsx)("div",{className:"home",children:Object(i.jsxs)("div",{className:"home__container",children:[Object(i.jsx)("h1",{className:"home__title",children:"Messenger"}),Object(i.jsx)("button",{className:"home__btn",onClick:function(){return t("SIGNIN")},children:"\u0110\u0103ng nh\u1eadp"}),Object(i.jsx)("button",{className:"home__btn",onClick:function(){return t("SIGNUP")},children:"\u0110\u0103ng k\xfd"})]})})}var o=n(13);n(25);o.a.initializeApp({apiKey:"AIzaSyC2IA9tuaC3li03Ci0I_hNpUtAZqRAjigM",authDomain:"imess-clone.firebaseapp.com",projectId:"imess-clone",storageBucket:"imess-clone.appspot.com",messagingSenderId:"182593262620",appId:"1:182593262620:web:789bfa10d162e749cbbbd9"});var l=o.a.firestore(),j=n(17);n(29);function m(e){var t=Object(s.useState)([]),n=Object(a.a)(t,2),r=n[0],u=n[1],o=Object(s.useState)(""),m=Object(a.a)(o,2),b=m[0],h=m[1],d=c.a.createRef(),f=e.user;return Object(s.useEffect)((function(){l.collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));u(t)}))}),[]),Object(s.useEffect)((function(){!function(){var e=d.current.scrollHeight-d.current.clientHeight;d.current.scrollTo(0,e)}()}),[d]),Object(i.jsx)("div",{className:"messenger",children:Object(i.jsxs)("div",{className:"messenger__container",children:[Object(i.jsx)("h1",{className:"messenger__title",children:"Public"}),Object(i.jsx)("div",{ref:d,className:"messenger__content",children:r.map((function(e,t){return Object(i.jsxs)("div",{className:e.username===f?"messenger__user":"messenger__friend",children:[Object(i.jsx)("span",{className:"messenger__message",children:e.message}),Object(i.jsx)("span",{className:"messenger__username",children:e.username})]},t)}))}),Object(i.jsxs)("form",{className:"messenger__form",onSubmit:function(e){return function(e){e.preventDefault(),l.collection("messages").add({username:f,message:b,timestamp:j.a.firestore.FieldValue.serverTimestamp()}),h("")}(e)},children:[Object(i.jsx)("input",{className:"messenger__input",type:"text",placeholder:"Aa",onChange:function(e){return h(e.target.value)},value:b,required:!0}),Object(i.jsx)("button",{className:"messenger__btn",type:"submit",children:"G\u1eedi"})]})]})})}n(30);function b(e){var t=Object(s.useState)(""),n=Object(a.a)(t,2),c=n[0],r=n[1],u=Object(s.useState)(""),o=Object(a.a)(u,2),j=o[0],m=o[1],b=Object(s.useState)([]),h=Object(a.a)(b,2),d=h[0],f=h[1],p=e.setScreen,g=e.setUser;return Object(s.useEffect)((function(){l.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));f(t)}))}),[]),Object(i.jsx)("div",{className:"sign-in",children:Object(i.jsxs)("div",{className:"sign-in__container",children:[Object(i.jsx)("h1",{className:"sign-in__title",children:"Sign In"}),Object(i.jsxs)("form",{className:"sign-in__form",onSubmit:function(e){return function(e){e.preventDefault();for(var t=!1,n=0;n<d.length;n++)if(d[n].username===c&&d[n].hash===j){t=!0;break}t?(alert("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!"),g(c),p("MESSENGER")):alert("T\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c sai m\u1eadt kh\u1ea9u!")}(e)},children:[Object(i.jsx)("input",{className:"sign-in__input",type:"text",placeholder:"T\xean t\xe0i kho\u1ea3n",onChange:function(e){return r(e.target.value.toLowerCase())},required:!0}),Object(i.jsx)("input",{className:"sign-in__input",type:"password",placeholder:"M\u1eadt kh\u1ea9u",onChange:function(e){return m(e.target.value)},required:!0}),Object(i.jsx)("button",{className:"sign-in__btn",type:"submit",children:"\u0110\u0103ng nh\u1eadp"}),Object(i.jsx)("button",{className:"sign-in__btn",onClick:function(){return p("SIGNUP")},children:"\u0110\u0103ng k\xfd"})]})]})})}n(31);function h(e){var t=Object(s.useState)(""),n=Object(a.a)(t,2),c=n[0],r=n[1],u=Object(s.useState)(""),o=Object(a.a)(u,2),j=o[0],m=o[1],b=Object(s.useState)([]),h=Object(a.a)(b,2),d=h[0],f=h[1],p=e.setScreen;return Object(s.useEffect)((function(){l.collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){var t=e.data();return t.id=e.id,t}));f(t)}))}),[]),Object(i.jsx)("div",{className:"sign-up",children:Object(i.jsxs)("div",{className:"sign-up__container",children:[Object(i.jsx)("h1",{className:"sign-up__title",children:"Sign Up"}),Object(i.jsxs)("form",{className:"sign-up__form",onSubmit:function(e){return function(e){e.preventDefault();for(var t=!1,n=0;n<d.length;n++)if(d[n].username===c){t=!0;break}if(t)alert("T\xe0i kho\u1ea3n \u0111\xe3 t\u1ed3n t\u1ea1i!");else{alert("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!");var s={username:c,hash:j};l.collection("users").add(s),p("SIGNIN")}}(e)},children:[Object(i.jsx)("input",{type:"text",className:"sign-up__input",placeholder:"T\xean t\xe0i kho\u1ea3n",onChange:function(e){return r(e.target.value.toLowerCase())},required:!0}),Object(i.jsx)("input",{type:"password",className:"sign-up__input",placeholder:"M\u1eadt kh\u1ea9u",onChange:function(e){return m(e.target.value)},required:!0}),Object(i.jsx)("button",{type:"submit",className:"sign-up__btn",children:"\u0110\u0103ng k\xfd"})]})]})})}n(32);function d(){var e=Object(s.useState)(""),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),o=Object(a.a)(r,2),l=o[0],j=o[1];return Object(i.jsx)(i.Fragment,{children:function(){switch(n){case"SIGNIN":return Object(i.jsx)(b,{setUser:j,setScreen:c});case"SIGNUP":return Object(i.jsx)(h,{setScreen:c});case"MESSENGER":return Object(i.jsx)(m,{user:l});case"HOME":default:return Object(i.jsx)(u,{setScreen:c})}}()})}Object(r.render)(Object(i.jsx)(d,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.055e4ecd.chunk.js.map