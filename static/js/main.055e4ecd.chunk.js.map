{"version":3,"sources":["features/home/Home.jsx","firebase.js","features/messenger/Messenger.jsx","features/signin/SignIn.jsx","features/signup/SignUp.jsx","app/App.jsx","index.js"],"names":["Home","props","setScreen","className","onClick","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","Messenger","useState","messages","setMessages","message","setMessage","chatContainer","React","createRef","user","useEffect","collection","orderBy","onSnapshot","snapshot","docs","map","doc","data","id","scroll","current","scrollHeight","clientHeight","scrollTo","scrollToMyRef","ref","index","username","onSubmit","e","preventDefault","add","timestamp","FieldValue","serverTimestamp","type","placeholder","onChange","target","value","required","SignIn","setUsername","password","setPassword","users","setUsers","setUser","found","i","length","hash","alert","toLowerCase","SignUp","App","screen","renderScreen","render","document","getElementById"],"mappings":"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","file":"static/js/main.055e4ecd.chunk.js","sourcesContent":["import React from 'react';\nimport \"./Home.scss\";\n\nexport default function Home(props) {\n    const { setScreen } = props;\n\n    return (\n        <div className=\"home\">\n            <div className=\"home__container\">\n                <h1 className=\"home__title\">Messenger</h1>\n                <button className=\"home__btn\" onClick={() => setScreen(\"SIGNIN\")}>Đăng nhập</button>\n                <button className=\"home__btn\" onClick={() => setScreen(\"SIGNUP\")}>Đăng ký</button>\n            </div>\n        </div>\n    )\n}\n","import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nconst config = {\n\tapiKey: \"AIzaSyC2IA9tuaC3li03Ci0I_hNpUtAZqRAjigM\",\n\tauthDomain: \"imess-clone.firebaseapp.com\",\n\tprojectId: \"imess-clone\",\n\tstorageBucket: \"imess-clone.appspot.com\",\n\tmessagingSenderId: \"182593262620\",\n\tappId: \"1:182593262620:web:789bfa10d162e749cbbbd9\",\n};\n// Initialize Firebase\nfirebase.initializeApp(config);\n\nexport const db = firebase.firestore();\n","import React, { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport firebase from \"firebase\";\nimport \"./Messenger.scss\";\n\nexport default function Messenger(props) {\n    const [messages, setMessages] = useState([]);\n    const [message, setMessage] = useState(\"\");\n\n    const chatContainer = React.createRef();\n\n    const { user } = props;\n    \n    const scrollToMyRef = () => {\n        const scroll = chatContainer.current.scrollHeight - chatContainer.current.clientHeight;\n        chatContainer.current.scrollTo(0, scroll);\n    };\n\n\tuseEffect(() => {\n        db.collection(\"messages\")\n        .orderBy(\"timestamp\", \"asc\")\n        .onSnapshot((snapshot) => {\n\t\t\tlet messages = snapshot.docs.map((doc) => {\n\t\t\t\tlet message = doc.data();\n\t\t\t\tmessage.id = doc.id;\n\t\t\t\treturn message;\n\t\t\t});\n            setMessages(messages);\n        });\n    }, []);\n\n    useEffect(() => {\n        scrollToMyRef();\n        // eslint-disable-next-line\n    }, [chatContainer])\n    \n    function onSubmit(e) {\n        e.preventDefault();\n        db.collection(\"messages\").add({\n            username: user,\n            message: message,\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        setMessage(\"\");\n    }\n\n\treturn (\n\t\t<div className=\"messenger\">\n\t\t\t<div className=\"messenger__container\">\n\t\t\t\t<h1 className=\"messenger__title\">Public</h1>\n\t\t\t\t<div ref={chatContainer} className=\"messenger__content\">\n                    {messages.map((message, index) => {\n                        return <div className={message.username === user ? \"messenger__user\" : \"messenger__friend\"} key={index}>\n                            <span className=\"messenger__message\">{message.message}</span>\n                            <span className=\"messenger__username\">{message.username}</span>\n                        </div>\n                    })}\n\t\t\t\t</div>\n\t\t\t\t<form className=\"messenger__form\" onSubmit={(e) => onSubmit(e)}>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"messenger__input\"\n\t\t\t\t\t\ttype=\"text\"\n                        placeholder=\"Aa\"\n                        onChange={(e) => setMessage(e.target.value)}\n                        value={message}\n                        required\n\t\t\t\t\t/>\n\t\t\t\t\t<button className=\"messenger__btn\" type=\"submit\">\n\t\t\t\t\t\tGửi\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useState } from 'react';\nimport { db } from \"../../firebase\";\nimport \"./SignIn.scss\";\n\nexport default function SignIn(props) {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [users, setUsers] = useState([]);\n\n    const { setScreen, setUser } = props;\n\n    useEffect(() => {\n\t\tdb.collection(\"users\").onSnapshot((snapshot) => {\n\t\t\tlet users = snapshot.docs.map((doc) => {\n\t\t\t\tlet user = doc.data();\n\t\t\t\tuser.id = doc.id;\n\t\t\t\treturn user;\n\t\t\t});\n\t\t\tsetUsers(users);\n\t\t});\n\t}, []);\n\n    function onSubmit(e) {\n        e.preventDefault();\n\n        let found = false;\n\t\tfor (let i = 0; i < users.length; i++) {\n\t\t\tif (users[i].username === username && users[i].hash === password) {\n\t\t\t\tfound = true;\n\t\t\t\tbreak;\n\t\t\t}\n        }\n        \n        if (found) {\n            alert(\"Đăng nhập thành công!\");\n            setUser(username);\n            setScreen(\"MESSENGER\");\n\t\t} else {\n\t\t\talert(\"Tài khoản không tồn tại hoặc sai mật khẩu!\");\n\t\t}\n    }\n\n    return (\n        <div className=\"sign-in\">\n            <div className=\"sign-in__container\">\n                <h1 className=\"sign-in__title\">Sign In</h1>\n                <form className=\"sign-in__form\" onSubmit={(e) => onSubmit(e)}>\n                    <input className=\"sign-in__input\" type=\"text\" placeholder=\"Tên tài khoản\" onChange={(e) => setUsername(e.target.value.toLowerCase())} required/>\n                    <input className=\"sign-in__input\" type=\"password\" placeholder=\"Mật khẩu\" onChange={(e) => setPassword(e.target.value)} required/>\n                    <button className=\"sign-in__btn\" type=\"submit\">Đăng nhập</button>\n                    <button className=\"sign-in__btn\" onClick={() => setScreen(\"SIGNUP\")}>Đăng ký</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n","import React, { useEffect, useState } from \"react\";\nimport { db } from \"../../firebase\";\nimport \"./SignUp.scss\";\n\nexport default function SignUp(props) {\n\tconst [username, setUsername] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\tconst [users, setUsers] = useState([]);\n\n\tconst { setScreen } = props;\n\n\tuseEffect(() => {\n\t\tdb.collection(\"users\").onSnapshot((snapshot) => {\n\t\t\tlet users = snapshot.docs.map((doc) => {\n\t\t\t\tlet user = doc.data();\n\t\t\t\tuser.id = doc.id;\n\t\t\t\treturn user;\n\t\t\t});\n\t\t\tsetUsers(users);\n\t\t});\n\t}, []);\n\n\tfunction onSubmit(e) {\n\t\te.preventDefault();\n\n\t\tlet found = false;\n\t\tfor (let i = 0; i < users.length; i++) {\n\t\t\tif (users[i].username === username) {\n\t\t\t\tfound = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (found) {\n            alert(\"Tài khoản đã tồn tại!\");\n\t\t} else {\n\t\t\talert(\"Đăng ký thành công!\");\n\t\t\tconst user = {\n\t\t\t\tusername: username,\n\t\t\t\thash: password,\n\t\t\t};\n\t\t\tdb.collection(\"users\").add(user);\n\t\t\tsetScreen(\"SIGNIN\");\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"sign-up\">\n\t\t\t<div className=\"sign-up__container\">\n\t\t\t\t<h1 className=\"sign-up__title\">Sign Up</h1>\n\t\t\t\t<form className=\"sign-up__form\" onSubmit={(e) => onSubmit(e)}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"sign-up__input\"\n\t\t\t\t\t\tplaceholder=\"Tên tài khoản\"\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tsetUsername(e.target.value.toLowerCase())\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tclassName=\"sign-up__input\"\n\t\t\t\t\t\tplaceholder=\"Mật khẩu\"\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<button type=\"submit\" className=\"sign-up__btn\">\n\t\t\t\t\t\tĐăng ký\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useState } from \"react\";\nimport Home from \"../features/home/Home\";\nimport Messenger from \"../features/messenger/Messenger\";\nimport SignIn from \"../features/signin/SignIn\";\nimport SignUp from \"../features/signup/SignUp\";\nimport \"./App.scss\";\n\nexport default function App() {\n    const [screen, setScreen] = useState(\"\");\n    const [user, setUser] = useState(\"\");\n\n    function renderScreen() {\n        switch (screen) {\n            case \"SIGNIN\":\n                return <SignIn setUser={setUser} setScreen={setScreen}/>\n            case \"SIGNUP\":\n                return <SignUp setScreen={setScreen}/>\n            case \"MESSENGER\":\n                return <Messenger user={user}/>\n            case \"HOME\":\n            default:\n                return <Home setScreen={setScreen}/>\n        }\n    }\n\n\treturn (\n        <>\n            {renderScreen()}\n        </>\n\t);\n}\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport \"./assets/styles/index.scss\";\nimport App from \"./app/App\";\n\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}